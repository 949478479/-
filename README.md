# GraffitiBoard

学习 `Quartz 2D` 过程中鼓捣的一个手势解锁和涂鸦板~

###功能

* 手势解锁.
* 瞎胡画...
* 画一些基本几何图形,例如直线,虚线,矩形,方形,椭圆,圆.还可以画箭头.
* 橡皮擦除功能.
* 调节线条粗细,颜色,还可以用调色盘调节颜色.
* 画笔线条粗细,颜色预览.
* 撤销,重做,清屏,保存.
* 从相册选择一张图片作为背景在上面涂鸦.
* 将涂鸦保存到相册.

###思路

* 利用 `CALayer` 的 `drawInContext:` 绘图.
* 计算最小重绘矩形范围配合 `setNeedsDisplayInRect:` 尽量减小重绘区域.
* 开启 `drawsAsynchronously` 异步绘制.
* 将之前的复杂路径直接作为位图渲染,并以此实现撤销/重做.
* 用 `kCGBlendModeClear` 实现橡皮功能.
* 用 `renderInContext:` 将照片图层连同用于涂鸦的子图层保存为图片.

###备注

最近学习了一些 `Quartz 2D` 和图形性能优化的博客,就把以前写的手势解锁和涂鸦板改进并完善了下.  
感谢 MBProgressHUD 和 RSColorPicker 的作者~
